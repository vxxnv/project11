@model Order

@{
    ViewData["Title"] = "Контакты";
}

<div class="container mt-4">
    <div class="row">
        <div class="col-lg-8">
            <h1 class="mb-4">Контакты</h1>
            
            <div class="card mb-4">
                <div class="card-body">
                    <h4>Контактная информация</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>Адрес:</strong><br>г. Ижевск, Пушкинская ул., 268Ж</p>
                            <p><strong>Телефон:</strong><br>8 (917) 936-01-14</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Email:</strong><br>info@mebelmaster.ru</p>
                            <p><strong>Часы работы:</strong><br>Пн-Пт: 9:00 - 18:00<br>Сб: 10:00 - 16:00<br>Вс: выходной</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-body">
                    <h4>Связаться с нами</h4>
                    <form method="post" action="/Home/SubmitOrder">
                        @Html.AntiForgeryToken()
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Ваше имя *</label>
                                <input type="text" class="form-control" name="CustomerName" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Телефон *</label>
                                <input type="tel" class="form-control" name="Phone" required>
                            </div>
                            <div class="col-12">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control" name="Email">
                            </div>
                            <div class="col-12">
                                <label class="form-label">Сообщение</label>
                                <textarea class="form-control" name="Message" rows="4" placeholder="Опишите вашу задачу..."></textarea>
                            </div>
                            <div class="col-12">
                                <button type="submit" class="btn btn-primary btn-lg">Отправить сообщение</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Как добраться</h5>
                    
                    <!-- Карта -->
                    <div class="map-container mb-3">
                        <div id="map" style="height: 300px; border-radius: 8px; overflow: hidden;"></div>
                    </div>
                    
                    <div class="location-info">
                        <p class="mb-2"><strong>Адрес:</strong></p>
                        <p class="text-muted mb-3">г. Ижевск, Пушкинская ул., 268Ж</p>
                        
                        <p class="mb-2"><strong>Координаты:</strong></p>
                        <p class="text-muted mb-3">56.861756, 53.213395</p>
                        
                        <div class="d-grid gap-2">
                            <a href="https://yandex.ru/maps/?pt=53.213395,56.861756&z=17&l=map" 
                               target="_blank" 
                               class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-external-link-alt me-1"></i>Открыть в Яндекс.Картах
                            </a>
                            <a href="https://www.google.com/maps?q=56.861756,53.213395" 
                               target="_blank" 
                               class="btn btn-outline-danger btn-sm">
                                <i class="fas fa-external-link-alt me-1"></i>Открыть в Google Картах
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <!-- Яндекс Карты API -->
    <script src="https://api-maps.yandex.ru/2.1/?apikey=ваш_api_ключ&lang=ru_RU" type="text/javascript"></script>
    
    <script type="text/javascript">
        // Инициализация карты
        ymaps.ready(init);
        
        function init() {
            // Координаты нашего офиса
            var officeCoordinates = [56.861756, 53.213395];
            
            // Создаем карту
            var map = new ymaps.Map('map', {
                center: officeCoordinates,
                zoom: 16,
                controls: ['zoomControl', 'fullscreenControl']
            });
            
            // Создаем метку
            var officePlacemark = new ymaps.Placemark(officeCoordinates, {
                hintContent: 'Мебельный Мастер',
                balloonContent: `
                    <strong>Мебельный Мастер</strong><br>
                    г. Ижевск, Пушкинская ул., 268Ж<br>
                    <small>Производство мебели на заказ</small>
                `
            }, {
                // Опции метки
                preset: 'islands#redIcon',
                iconColor: '#dc3545'
            });
            
            // Добавляем метку на карту
            map.geoObjects.add(officePlacemark);
            
            // Добавляем поиск на карту
            map.controls.add('searchControl');
            
            // Добавляем масштаб
            map.controls.add('typeSelector');
        }
        
        // Резервный вариант если Яндекс Карты не загрузились
        setTimeout(function() {
            if (typeof ymaps === 'undefined') {
                document.getElementById('map').innerHTML = `
                    <div class="h-100 d-flex align-items-center justify-content-center bg-light">
                        <div class="text-center">
                            <i class="fas fa-map-marker-alt fa-2x text-muted mb-2"></i>
                            <p class="text-muted mb-0">Карта не загрузилась</p>
                            <small class="text-muted">Используйте ссылки для открытия в картах</small>
                        </div>
                    </div>
                `;
            }
        }, 5000);
    </script>

    <style>
        .map-container {
            position: relative;
        }
        
        /* Стили для загрузки карты */
        #map {
            background: #f8f9fa;
            position: relative;
        }
        
        #map::before {
            content: "Загрузка карты...";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #6c757d;
            z-index: 0;
        }
        
        .location-info {
            font-size: 0.9rem;
        }
        
        .btn-sm {
            font-size: 0.8rem;
        }
    </style>
}